<!DOCTYPE html>
<html>
<head>
	<title></title>

	<script type="text/javascript" src="/home/mobme/my_project/bower_components/jquery/dist/jquery.min.js"></script>

	<link rel="stylesheet" type="text/css" href="/home/mobme/my_project/bower_components/bootstrap/dist/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="bower_components/components-font-awesome/css/font-awesome.css">
	<style type="text/css">

		
        body
        {
            font-family: Arial;
            font-size: 10pt;
            background-position: center;
            /*background-image: url("http://www.baltana.com/files/wallpapers-2/Blue-Blurry-Light-Tumblr-Wallpaper-06492.jpg");*/
            background: -webkit-linear-gradient(left, #25c481, #25b7c4);
  background: linear-gradient(to right, #25c481, #25b7c4);
        }
        h1,h2{
        	text-align: center;
        	
        }
        #demo{
        	color:greem;
        }
        .container
        {
        	width:700px;
        	height:500px;
        	margin-left:300px;
        	
            /*margin-top: 100px;*/
            align-content: center;
        }

        
        table, td{
        	border: 0.5px  solid white;
   
     width: 100px;
            text-align: center;
           height: 50px;
padding: 15px;
            
}
#mytable{
	/*margin-left:200px; */
	
	  font-weight: 300;
	  color: #fff;
	  align-content: center;
  
	
}

#fileUpload 	
{
	padding: 10px;
	position:relative;
	margin-left:150px;
	
	
		display: inline;
}
#Upload
{
margin-top:250px;
}
#add
{
	margin-left: 200px;
	position: relative;
}
#ch
{
	font-size: 14px;
	font-style: sans-serif;

}
.jumbotron{

	text-align: center;

}
td:hover {background-color: #778899;}


    </style>




</head>
<body>

<script type="text/javascript">
	var arr=[];
	var arr1=[];
	var data;
	var c=0;
	var r=0;
	var k=0;
function myfunction(){
	 
            var m=0;
            var n=0;  
            var k=0;  
	var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
                //if (regex.test($("#fileUpload").val().toLowerCase())) {
                	var x=document.getElementById("fileUpload").value;
                	console.log("x= "+x);
                	if (regex.test(document.getElementById("fileUpload").value.toLowerCase())) {
                		console.log("Entered 1");
                    if (typeof (FileReader) != "undefined") {
                    	console.log("Entered 2");
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            //var table = $("<table />");
                            var body=document.getElementById("dvCSV");
                            var table=document.createElement("mytable");
                            table.id="mytable";
                           // var tbody=document.createElement("mytbody");
                            //tbody.id="mytbody";
                            var rows = e.target.result.split("\n");                            
                            for (var i = 0; i < rows.length-1; i++) {
                                arr.push([]);
                                //var row = $("<tr />");
                                var row=document.createElement("tr");
                               row.id="myrow"+i;
                                var cells = rows[i].split(",");                                                            
                                for (var j = 0; j < cells.length; j++) {
                                    //var cell = $("<td />");   
                                    var cell=document.createElement("td");
                                    cell.id="mycell"+j;
                                    var celltext=document.createTextNode(cells[j]);
                                    //cell.html(cells[j]);  
                                    arr[m].push(cells[j]);
                                    //row.append(cell); 
                                    cell.appendChild(celltext);
                                    row.appendChild(cell);
                                     c=j;  
                                }                             
                             table.append(row);  
                             //tbody.appendChild(row);   
                            
                             m++;
                            }                            
                           // $("#dvCSV").html('');
                           // $("#dvCSV").append(table);         
                          // table.appendChild(tbody);
                           //body.appendChild(table);       
                           body.appendChild(table);
                        }
                        reader.readAsText($("#fileUpload")[0].files[0]);
                    } else {
                        alert("This browser does not support HTML5.");
                    }                    
                } else {
                    alert("Please upload a valid CSV file.");
                }
}


function myfunction1(){
	console.log("Entered function1");
	var body=document.getElementById("convert");
	var table=document.createElement("table");
    var tbody=document.createElement("tbody");
	for(var i=0;i<arr1.length;i++){
		var row=document.createElement("tr");
		for(var j=0;j<arr1[i].length;j++){
			var cell=document.createElement("td");
			var cell1=document.createElement("td");
			var celltext=document.createTextNode(arr1[i][j]);
			var celltext1=document.createTextNode(arr[i][j]);
			cell.appendChild(celltext);
			cell1.appendChild(celltext1);
			row.appendChild(cell1);	
			row.appendChild(cell);		

		}
		tbody.appendChild(row);
	}
	table.appendChild(tbody);
	body.appendChild(table);

}



function addcol(){
	/*console.log(dvCSV);
	console.log(mytbody);
var table=document.getElementById("myrow");
var t=table.rows.length[1];
console.log("row length is "+t);*/
//var row = document.getElementById("myrow");

//var row = document.getElementById("myrow");
c++;
for(var i=0;i<arr.length;i++){
	
	//console.log(document.getElementById("myrow1"));
	for(var j=0,k=c;j<arr[i].length;j++){
var row= document.getElementById("myrow"+i);

var x = row.insertCell(-1);
x.id="mycell"+k;
x.innerHTML = "_____";
k++;
}

}
c=k-1;

console.log(document.getElementById("mytable"));
    


}


function change(){

console.log("c is "+c);
	for(var i=0;i<arr.length;i++){
		var row = document.getElementById("myrow"+i);
		row.deleteCell(c);


	}


c--;
c++;
for(var i=0;i<arr1.length;i++){
	
	//console.log(document.getElementById("myrow1"));
	for(var j=0;j<arr1[i].length;j++){
var row= document.getElementById("myrow"+i);

var x = row.insertCell(-1);
x.id="mycell"+c;
x.innerHTML = arr1[i][j];
}

}



}




function myfunction2(){
	arr1=[];
	document.getElementById("demo").innerHTML = " ";
	for(var i=0;i<arr.length;i++)
	{
		
		console.log(arr[i]);
		test(arr[i],i);

	}


}

function test(text,i){

	var from=document.getElementById("fromlang").value;
  	var to=document.getElementById("tolang").value;
  	var jsn;
  	var xhttp;
	//var text="hello"
	arr1.push([]);
		var xhttp = new XMLHttpRequest();		
  		xhttp.onreadystatechange = function() {
    	if (this.readyState == 4 && this.status == 200) {
      		document.getElementById("demo").innerHTML = "Changed";
      		//window.alert("Changed");
      		data = JSON.parse(xhttp.responseText);
      		jsn=data.translationText;
      		
			arr1[i].push(jsn);
			//arr1[i]=jsn;
			//console.log("jsn "+jsn);
			
			
    		}
  		};
  		
  	var url="http://transltr.org/api/translate?text="+text+"&to="+to+"&from="+from;
  	
  	xhttp.open("GET", url, true);
  	xhttp.send();
	
	
	/*var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML = this.responseText;
      data = JSON.parse(xhttp.responseText);
	var jsn=data.translationText;
	console.log("data "+jsn);
    }
  };
  var text="مرحبا";
  var to="en";
  var from="ar";
  var url="http://transltr.org/api/translate?text="+text+"&to="+to+"&from="+from;
  xhttp.open("GET", url, true);
  xhttp.send();*/

  
 


}

</script>
<!--<div class="jumbotron">
	<h1>Csv to HTML Table </h1>
	<h2>to your own Language</h2>
</div>-->

	<h1>Csv to HTML Table </h1>
	<h2>to your own Language</h2>
	 
<div class="container">


 <input type="file" id="fileUpload" class="btn btn-primary" >
    <input type="button" id="upload" value="Upload" class="btn btn-primary" onclick="myfunction()">     
   
  
    <br>
    <br>
    
    <div id="dvCSV"></div> 
    <br>     
    <br>
   	<input type="button" class="btn btn-primary" value="Add Column" id="add" onclick="addcol()">
    <br>
    <br>
    <br>
    <br>
    <label id="ch"><b>Change Language from :</b> </label>    
    <select name="fromlang" class="btn btn-primary" style="height:32px; padding:0;" id="fromlang" size="1">
    <option value="-">From</option><!-- this is more more UX to me says, "hey, change me and Ill do something..."-->
    <option value="en">ENGLISH</option>    
    <option value="ml">MALAYALAM</option>
    <option value="es">SPANISH</option>
    <option value="ta">TAMIL</option>
    <option value="nl">DUTCH</option>
    <option value="hi">HINDI</option>
    <option value="fr">FRENCH</option>
    </select>
    <label> to :</label>
    <select name="tolang" class="btn btn-primary" style="height:32px; padding:0;" id="tolang" size="1"">
    <option value="-">To</option><!-- this is more more UX to me says, "hey, change me and Ill do something..."-->
    <option value="en">ENGLISH</option>    
    <option value="ml">MALAYALAM</option>
    <option value="es">SPANISH</option>
    <option value="ta">TAMIL</option>
    <option value="nl">DUTCH</option>
    <option value="hi">HINDI</option>
    <option value="fr">FRENCH</option>
    </select>
    <!--<input type="button" id="convert" value="convert" onclick="test()">-->
    
    <input type="button" id="test" value="change" class="btn btn-primary" onclick="myfunction2()">
    <!--<input type="button" value="print" onclick="myfunction1()">-->
    <input type="button" value="Display" class="btn btn-primary" onclick="change()">
    <div id="demo"></div>    
    <div id="convert"></div>
    
</div>
  

</body>
</html>