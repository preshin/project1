<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="/home/mobme/my_project/bower_components/jquery/dist/jquery.min.js"></script>
	<style type="text/css">

		
        body
        {
            font-family: Arial;
            font-size: 10pt;
        }
        table
        {
            border: 1px solid #ccc;
            border-collapse: collapse;
        }
        table th
        {
            background-color: #F7F7F7;
            color: #333;
            font-weight: bold;
        }
        table th, table td
        {
            padding: 5px;
            border-color: black;
        }
        table, td, th {
    border: 1px solid black;
}

    </style>
</head>
<body>



    <script>
    function googleSectionalElementInit() {
      new google.translate.SectionalElement({
        sectionalNodeClassName: 'translate',
        controlNodeClassName: 'translate_control',
        background: '#f4fa58'
      }, 'google_sectional_element');      
    }
    </script>
<script type="text/javascript">
	var arr=[];
function myfunction(){
	 
            var m=0;
            var n=0;  
            var k=0;  
	var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
                //if (regex.test($("#fileUpload").val().toLowerCase())) {
                	var x=document.getElementById("fileUpload").value;
                	console.log("x= "+x);
                	if (regex.test(document.getElementById("fileUpload").value.toLowerCase())) {
                		console.log("Entered 1");
                    if (typeof (FileReader) != "undefined") {
                    	console.log("Entered 2");
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            //var table = $("<table />");
                            var body=document.getElementById("dvCSV");
                            var table=document.createElement("table");
                            var tbody=document.createElement("tbody");
                            var rows = e.target.result.split("\n");                            
                            for (var i = 0; i < rows.length-1; i++) {
                                arr.push([]);
                                //var row = $("<tr />");
                                var row=document.createElement("tr");
                                var cells = rows[i].split(",");                                                            
                                for (var j = 0; j < cells.length; j++) {
                                    //var cell = $("<td />");   
                                    var cell=document.createElement("td");
                                    var celltext=document.createTextNode(cells[j]);
                                    //cell.html(cells[j]);  
                                    arr[m].push(cells[j]);
                                    //row.append(cell); 
                                    cell.appendChild(celltext);
                                    row.appendChild(cell);
                                }                             
                             //table.append(row);  
                             tbody.appendChild(row);     
                             m++;
                            }                            
                           // $("#dvCSV").html('');
                           // $("#dvCSV").append(table);         
                           table.appendChild(tbody);
                           body.appendChild(table);                   
                        }
                        reader.readAsText($("#fileUpload")[0].files[0]);
                    } else {
                        alert("This browser does not support HTML5.");
                    }                    
                } else {
                    alert("Please upload a valid CSV file.");
                }
}


function myfunction1(){
	console.log("Entered function1");
	var body=document.getElementById("convert");
	var table=document.createElement("table");
    var tbody=document.createElement("tbody");
	for(var i=0;i<arr.length;i++){
		var row=document.createElement("tr");
		for(var j=0;j<arr[i].length;j++){
			var cell=document.createElement("td");
			var celltext=document.createTextNode(arr[i][j]);
			cell.appendChild(celltext);
			row.appendChild(cell);									
		}
		tbody.appendChild(row);
	}
	table.appendChild(tbody);
	body.appendChild(table);

}

function language(){

	var lang=document.getElementById("langpair").value;
	var s=document.createElement("script");
	s.type="text/javascript";
	s.src="http://translate.google.com/translate_a/element.js?cb=googleSectionalElementInit&ug=section&hl="+lang;
	s.innerHTML = null;
    s.id = "lan";
    document.getElementById("new_script").innerHTML = "";
    document.getElementById("new_script").appendChild(s);
    var rem=document.getElementById("lan").remove();
	console.log(lang);
}




</script>

    <!--<script src="http://translate.google.com/translate_a/element.js?cb=googleSectionalElementInit&ug=section&hl=ml"></script>    
    <script src="http://translate.google.com/translate_a/element.js?cb=googleSectionalElementInit&ug=section&hl=ml" id="script"></script>  -->  
    <input type="file" id="fileUpload" >
    <input type="button" id="upload" value="Upload" onclick="myfunction(),myfunction1()">     
    <br>     
    <br>
    <div id="dvCSV"></div> 
    <br>
    <br>
   <input type="button" value="Create" onclick="myfunction1()">
    <br>
    <br>
    <select name="langpair" style="height:32px; padding:0;" id="langpair" size="1" onclick="language()">
    <option value="-">Select Language</option><!-- this is more more UX to me says, "hey, change me and Ill do something..."-->
    <option value="en">ENGLISH</option>    
    <option value="ml">MALAYALAM</option>
    <option value="es">SPANISH</option>
    <option value="ta">TAMIL</option>
    <option value="nl">DUTCH</option>
    <option value="hi">HINDI</option>
    <option value="fr">FRENCH</option>
    
</select>
<br>
<br>
    <div class="translate">    
    <br>
    <br>                                  	
        <div id="convert">        	
        </div>
        <div class="translate_control" ></div>
    </div> 
<div id="new_script">
	<!--<script type="text/javascript" id="lan" src="http://translate.google.com/translate_a/element.js?cb=googleSectionalElementInit&ug=section&hl=en"></script>-->
</div>

</body>
</html>	